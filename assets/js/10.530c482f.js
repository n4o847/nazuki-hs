(()=>{"use strict";var e,t,r={5010:(e,t,r)=>{var s=r(1877);class n{constructor(e,t){this.memory=e,this.malloc=t}sendString(e){const t=new TextEncoder,r=t.encode(e).byteLength,s=this.malloc(r);return t.encodeInto(e,new Uint8Array(this.memory.buffer,s,r)),[s,r]}}class i{constructor(e,t){this.memory=e,this.free=t}receiveString(e,t){const r=new TextDecoder,s=new DataView(this.memory.buffer,e,t),n=r.decode(s);return this.free(e),n}receiveCompileResult(e){const t=new DataView(this.memory.buffer,e,12),r=t.getUint32(0,!0);if(0===r){const r=t.getUint32(4,!0),s=t.getUint32(8,!0),n=this.receiveString(r,s);return this.free(e),{status:"error",message:n}}if(1===r){const r=t.getUint32(4,!0),s=t.getUint32(8,!0),n=this.receiveString(r,s);return this.free(e),{status:"success",output:n}}throw new Error(`invalid status ${r}`)}receiveCreateBannerResult(e){const t=new DataView(this.memory.buffer,e,8),r=t.getUint32(0,!0),s=t.getUint32(4,!0),n=this.receiveString(r,s);return this.free(e),{output:n}}}const o=new URL(r(3719),r.b),a=WebAssembly.compileStreaming(fetch(o));Object.defineProperty(self,"Buffer",{value:{from(e,t){const r=atob(e),s=new Uint8Array(r.length);for(let n=0;n<r.length;n++)s[n]=r.charCodeAt(n);return s}}}),self.addEventListener("message",(async e=>{if("compile"===e.data.method){const t=await c(e.data.params);self.postMessage({result:t,id:e.data.id})}else if("assemble"===e.data.method){const t=await l(e.data.params);self.postMessage({result:t,id:e.data.id})}else if("run"===e.data.method){const t=await p(e.data.params);self.postMessage({result:t,id:e.data.id})}else if("createBanner"===e.data.method){const t=await u(e.data.params);self.postMessage({result:t,id:e.data.id})}}));const c=async e=>{let{source:t}=e;await(0,s.S1)();const r=new s.xP({}).instantiate(await a);r.exports._initialize(),r.exports.hs_init(0,0);const o=new n(r.exports.memory,r.exports.malloc),c=new i(r.exports.memory,r.exports.free),[l,p]=o.sendString(t),u=r.exports.compile(l,p);return c.receiveCompileResult(u)},l=async e=>{let{source:t}=e;await(0,s.S1)();const r=new s.xP({}).instantiate(await a);r.exports._initialize(),r.exports.hs_init(0,0);const o=new n(r.exports.memory,r.exports.malloc),c=new i(r.exports.memory,r.exports.free),[l,p]=o.sendString(t),u=r.exports.assemble(l,p);return c.receiveCompileResult(u)},p=async e=>{let{program:t,input:r}=e;await(0,s.S1)();const o=new s.xP({}).instantiate(await a);o.exports._initialize(),o.exports.hs_init(0,0);const c=new n(o.exports.memory,o.exports.malloc),l=new i(o.exports.memory,o.exports.free),[p,u]=c.sendString(t),[m,d]=c.sendString(r),f=o.exports.run(p,u,m,d);return l.receiveCompileResult(f)},u=async e=>{let{source:t}=e;await(0,s.S1)();const r=new s.xP({}).instantiate(await a);r.exports._initialize(),r.exports.hs_init(0,0);const o=new n(r.exports.memory,r.exports.malloc),c=new i(r.exports.memory,r.exports.free),[l,p]=o.sendString(t),u=r.exports.createBanner(l,p);return c.receiveCreateBannerResult(u)}},3719:(e,t,r)=>{e.exports=r.p+"bfff3623958c1fee.wasm"}},s={};function n(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={id:e,loaded:!1,exports:{}};return r[e](i,i.exports,n),i.loaded=!0,i.exports}n.m=r,n.x=()=>{var e=n.O(void 0,[877],(()=>n(5010)));return e=n.O(e)},e=[],n.O=(t,r,s,i)=>{if(!r){var o=1/0;for(p=0;p<e.length;p++){r=e[p][0],s=e[p][1],i=e[p][2];for(var a=!0,c=0;c<r.length;c++)(!1&i||o>=i)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(a=!1,i<o&&(o=i));if(a){e.splice(p--,1);var l=s();void 0!==l&&(t=l)}}return t}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[r,s,i]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"assets/js/"+e+".7f563c21.js",n.miniCssF=e=>{},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="/nazuki-hs/",n.gca=function(e){return e={}[e]||e,n.p+n.u(e)},(()=>{n.b=self.location+"/../../../";var e={10:1};n.f.i=(t,r)=>{e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunk_nazuki_hs_website=self.webpackChunk_nazuki_hs_website||[],r=t.push.bind(t);t.push=t=>{var s=t[0],i=t[1],o=t[2];for(var a in i)n.o(i,a)&&(n.m[a]=i[a]);for(o&&o(n);s.length;)e[s.pop()]=1;r(t)}})(),t=n.x,n.x=()=>n.e(877).then(t);n.x()})();